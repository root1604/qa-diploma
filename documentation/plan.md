### Планирование автоматизации тестирования  

### 1. Перечень автоматизируемых сценариев

### Тестирование UI

####  Позитивные тесты  
  1. Покупка тура по кнопке "Купить" по данным действительной карты (статус карты "APPROVED")  
  2. Покупка тура по кнопке "Купить в кредит" по данным действительной карты (статус карты "APPROVED")  
  3. Покупка тура по кнопке "Купить" по данным недействительной карты (статус карты "DECLINED")  
  4. Покупка тура по кнопке "Купить в кредит" по данным недействительной карты (статус карты "DECLINED")   
  
####  Негативные тесты  
  
  Покупка по кнопке "Купить"  
    
  5. Отправка формы с незаполненным полем "Номер карты", остальные поля заполнены валидными данными.  
  6. Отправка формы с незаполненным полем "Год", остальные поля заполнены валидными данными.  
  7. Отправка формы с незаполненным полем "CVC/CVV", остальные поля заполнены валидными данными.  
  8. Отправка формы с полем "Номер карты", содержащим 15 символов, остальные поля заполнены валидными данными.  
  9. Отправка формы со значением больше 12 и меньше 100 в поле "Месяц", остальные поля заполнены валидными данными.  
  10. Отправка формы со значением больше 30 и меньше 100 в поле "Год", остальные поля заполнены валидными данными.  
  11. Отправка формы с заполненным на кириллице полем "Владелец", остальные поля заполнены валидными данными.  
  12. Отправка формы со значением, содержащим 2 символа в поле "CVC/CVV", остальные поля заполнены валидными данными. 
    
  Покупка по кнопке "Купить в кредит"  
    
  13. Отправка формы с незаполненным полем "Месяц", остальные поля заполнены валидными данными.  
  14. Отправка формы с незаполненным полем "Владелец", остальные поля заполнены валидными данными.  
  15. Отправка формы со всеми незаполненными полями.  
  16. Отправка формы с полем "Месяц", содержащим 1 символ, остальные поля заполнены валидными данными.  
  17. Отправка формы со значением, содержащим 1 символ в поле "Год", остальные поля заполнены валидными данными.  
  18. Отправка формы со значением поля "Владелец" длиной 257 символов, остальные поля заполнены валидными данными.  
  19. Отправка формы с содержащим спецсимволы полем "Владелец", остальные поля заполнены валидными данными.  
  
### Тестирование API
  
#### Негативные тесты  
   
  Покупка с полной оплатой 
  
  20. Отправка POST-запроса на покупку с незаполненным полем "Месяц", остальные поля заполнены валидными данными. 
  21. Отправка POST-запроса на покупку с незаполненным полем "Владелец", остальные поля заполнены валидными данными.  
  22. Отправка POST-запроса на покупку со всеми незаполненными полями.
  23. Отправка POST-запроса на покупку с полем "Месяц", содержащим 1 символ, остальные поля заполнены валидными данными.
  24. Отправка POST-запроса на покупку со значением, содержащим 1 символ в поле "Год", остальные поля заполнены валидными данными.
  25. Отправка POST-запроса на покупку со значением поля "Владелец" длиной 257 символов, остальные поля заполнены валидными данными.  
  26. Отправка POST-запроса на покупку с содержащим спецсимволы полем "Владелец", остальные поля заполнены валидными данными.  
  27. Отправка POST-запроса на покупку с полем "Номер карты", содержащим 17 символов, остальные поля заполнены валидными данными. 
  28. Отправка POST-запроса на покупку с полем "Месяц", содержащим 3 символа, остальные поля заполнены валидными данными.
  29. Отправка POST-запроса на покупку с полем "Год", содержащим 3 символа, остальные поля заполнены валидными данными.  
  30. Отправка POST-запроса на покупку с полем "CVC/CVV", содержащим 4 символа, остальные поля заполнены валидными данными.
  
  Покупка в кредит
   
  31. Отправка POST-запроса на покупку в кредит с незаполненным полем "Номер карты", остальные поля заполнены валидными данными.  
  32. Отправка POST-запроса на покупку в кредит с незаполненным полем "Год", остальные поля заполнены валидными данными.  
  33. Отправка POST-запроса на покупку в кредит с незаполненным полем "CVC/CVV", остальные поля заполнены валидными данными.  
  34. Отправка POST-запроса на покупку в кредит с полем "Номер карты", содержащим 15 символов, остальные поля заполнены валидными данными.  
  35. Отправка POST-запроса на покупку в кредит со значением больше 12 и меньше 100 в поле "Месяц", остальные поля заполнены валидными данными.  
  36. Отправка POST-запроса на покупку в кредит со значением больше 40 и меньше 100 в поле "Год", остальные поля заполнены валидными данными.  
  37. Отправка POST-запроса на покупку в кредит с заполненным на кириллице полем "Владелец", остальные поля заполнены валидными данными.  
  38. Отправка POST-запроса на покупку в кредит со значением, содержащим 2 символа в поле "CVC/CVV", остальные поля заполнены валидными данными.  
  39. Отправка POST-запроса на покупку в кредит с полем "Номер карты", содержащим 16 символов, с отличающимися от цифр значениями, остальные поля заполнены валидными данными.  
  40. Отправка POST-запроса на покупку в кредит с полем "Месяц", содержащим 2 символа, с отличающимися от цифр значениями, остальные поля заполнены валидными данными.  
  41. Отправка POST-запроса на покупку в кредит с полем "Год", содержащим 2 символа, с отличающимися от цифр значениями, остальные поля заполнены валидными данными.  
  42. Отправка POST-запроса на покупку в кредит с полем "CVC/CVV", содержащим 3 символа, с отличающимися от цифр значениями, остальные поля заполнены валидными данными.  
  
### Тестирование БД.
    
  43. Покупка не в кредит по действительной карте. Данные записываются в таблицы payment_entity и order_entity  
  44. Данные по покупке не в кредит записываются в таблицу order_entity  
  45. Данные о транзакции записываются в таблицу payment_entity  
  46. Данные по покупке в кредит записываются в таблицу credit_request_entity  
  
### 2. Перечень используемых инструментов с обоснованием выбора
    
  1. Автотесты пишутся на Java (выбор тестировщика)  
  2. Для тестирования UI будем использовать selenide - удобный инструмент для автоматических тестов, построенный на базе Selenium WebDriver, так как он позволяет сделать тесты более стабильными, позволяет обрабатывать таймауты в приложениях, автоматическое открытие и закрытие браузера, более простой синтаксис по сравнению с обычным Selenium WebDriver.  
  3. Библиотека для тестов junit, имеющая следующие преимущества:  
    - Представляет из себя тестовую среду.  
    - Не требует контроля со стороны пользователя во время исполнения.  
    - Возможность запускать несколько тестов одновременно.  
    - Сообщения обо всех ошибках в ходе тестирования.  
  4. Система автоматической сборки gradle для запуска тестов. Преимущества:  
    - Гибкая в настройках  
    - встроена в среду разработки IntelliJ Idea  
    - отсллеживает, что изменилось в сборке и последующие сборки проходят быстрее (инкрементальная сборка)  
  5. Фреймворк allure для генерации отчетов имеет много настроек, выдает красиво оформленные отчеты  
  6. Библиотека Rest Assured - для тестирования API. Имеет большой набор функционала, для полноценного использования не обязательно глубоко разбираться в HTTP  
  7. DbUtils - библиотека для работы с базами данных. Упрощает работу с JDBC, предоставляет чистый и понятный код для выполнения операций с базой данных без необходимости написания кода для очистки или предотвращения утечки ресурсов  
  
### 3. Перечень и описание возможных рисков(проблем) при автоматизации
  
  1. Настройка корректного запуска тестового окружения, так как контейнер с приложением запускается только после того, как запущена служба с БД в одном контейнере и служба симулятора банковских сервисов в другом контейнере.  
  2. Сложная структура страниц (сложность написания локаторов) и последующая отладка сценариев. 
  3. Отсутствие документации на структуру БД и на работу приложения с БД.
  4. Настройка тестовых сценариев на разных БД (Mysql и Postgres) 
  
### 4. Интервальная оценка с учётом рисков (в часах)
  
1. Настройка тестового окружения - 8   
2. Написание и отладка автотестов - 48  
3. Прогон тестов и описание багов - 16  
4. Отчёт по автоматизации и по итогам тестирования - 16  
Итого: 88 часов  
  
### 5. План сдачи работ
  
1. Настройка тестового окружения, написание и отладка автотестов - 06.03.2020  
2. Прогон тестов и описание багов - 11.03.2020  
3. Отчёт по автоматизации и по итогам тестирования - 13.03.2020 
